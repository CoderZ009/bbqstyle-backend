<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <link rel="icon" type="image/x-icon" href="src/favicon.ico">
    <link rel="stylesheet" href="css/checkout.css">
    <link rel="stylesheet" href="css/account.css">    <script src="js/baseurl.js"></script>
    <script src="https://sdk.cashfree.com/js/v3/cashfree.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">    <script src="js/baseurl.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>    <script src="js/baseurl.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>    <script src="js/baseurl.js"></script>
    <script src="js/config.js"></script>    <script src="js/baseurl.js"></script>
    <script src="js/auth-helper.js"></script>
</head>

<body>
    <div class="container">
        <h1 class="checkout-heading">Checkout</h1>

        <!-- Step 1: Address Selection -->
        <div id="step1" class="checkout-step active">
            <h2>Select Delivery Address</h2>

            <div class="address-section">
                <select id="addressSelect" class="address-dropdown">
                    <option value="">Select an address</option>
                    <option value="add-new">+ Add New Address</option>
                </select>
            </div>

            <!-- Add New Address Form -->
            <div id="addressForm" class="address-form hidden">
                <h3>Add New Address</h3>
                <form id="newAddressForm">
                    <div class="form-group">
                        <label for="fullName">Full Name *</label>
                        <input type="text" id="fullName" name="fullName" required>
                    </div>
                    <div class="form-group">
                        <label for="mobileNo">Mobile Number *</label>
                        <input type="tel" id="mobileNo" name="mobileNo" maxlength="10" pattern="[0-9]{10}" autocomplete="tel" required>
                    </div>
                    <div class="form-group">
                        <label for="addressLine1">Address Line 1 *</label>
                        <input type="text" id="addressLine1" name="addressLine1" required>
                    </div>
                    <div class="form-group">
                        <label for="addressLine2">Address Line 2</label>
                        <input type="text" id="addressLine2" name="addressLine2">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="city">City *</label>
                            <input type="text" id="city" name="city" required>
                        </div>
                        <div class="form-group">
                            <label for="pincode">Pincode *</label>
                            <input type="text" id="pincode" name="pincode" required maxlength="6">
                            <small class="text-gray-500">District and state will be auto-filled</small>
                        </div>
                        <div class="form-group">
                            <label for="district">District *</label>
                            <input type="text" id="district" name="district" required readonly>
                        </div>
                        <div class="form-group">
                            <label for="state">State *</label>
                            <input type="text" id="state" name="state" required readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="isDefault" name="isDefault">
                            Make this my default address
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="button" id="cancelAddress">Cancel</button>
                        <button type="submit">Save Address</button>
                    </div>
                </form>
            </div>

            <button id="nextToPayment" class="next-btn" disabled>Next</button>
        </div>

        <!-- Step 2: Payment Method -->
        <div id="step2" class="checkout-step hidden">
            <h2>Payment Method</h2>

            <div class="payment-section">
                <div class="payment-option">
                    <label>
                        <input type="radio" name="paymentMethod" value="COD" checked>
                        <span class="payment-label">Cash on Delivery (COD)</span>
                    </label>
                </div>
                <div class="payment-option">
                    <label>
                        <input type="radio" name="paymentMethod" value="Online">
                        <span class="payment-label">Online Payment</span>
                    </label>
                </div>
            </div>

            

            <!-- Promo Code Section -->
            <div class="md:w-1/3">
                <div class="mb-6 bg-gray-200 rounded-lg shadow-md overflow-hidden w-full">
                    <div class="p-4">
                        <h3 class="font-medium mb-2">Have a Promo Code?</h3>
                        <div class="flex">
                            <input type="text" id="promoCodeInput" placeholder="Enter code"
                                class="flex-grow border border-gray-300 rounded-l px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <button id="applyPromoBtn"
                                class="bg-gray-200 text-gray-800 px-4 py-2 rounded-r hover:bg-gray-300 transition-all">Apply</button>
                        </div>
                        <div id="promoMessage" class="mt-2 text-sm hidden"></div>
                    </div>
                </div>
            </div>

            <!-- Order Summary -->
            <div class="order-summary">
                <h3>Order Summary</h3>
                <div id="orderItems"></div>
                <div class="summary-row">
                    <span>Subtotal:</span>
                    <span id="subtotalAmount">₹0</span>
                </div>
                <div class="summary-row">
                    <span>Shipping:</span>
                    <span>Free</span>
                </div>
                <div class="summary-row">
                    <span>Tax:</span>
                    <span>All taxes are included in the prices</span>
                </div>
                <div class="summary-row">
                    <span>Discount:</span>
                    <span id="discountAmount" class="text-green-600">-₹0</span>
                </div>
                <div class="summary-row total">
                    <span>Total:</span>
                    <span id="totalAmount">₹0</span>
                </div>
            </div>

            <div class="checkout-actions">
                <button id="backToAddress" class="back-btn">Back</button>
                <button id="confirmOrder" class="confirm-btn">Confirm Order</button>
            </div>
        </div>

        <!-- Order Confirmation Modal -->
        <div id="confirmModal" class="modal hidden">
            <div class="modal-content">
                <h3>Confirm Your Order</h3>
                <p>Are you sure you want to place this order?</p>
                <div class="modal-actions">
                    <button id="cancelConfirm" class="cancel-btn">Cancel</button>
                    <button id="finalConfirm" class="confirm-btn">Yes, Place Order</button>
                </div>
            </div>
        </div>
    </div>    <script src="js/baseurl.js"></script>

    <script src="js/checkout.js"></script>
</body>

</html>
